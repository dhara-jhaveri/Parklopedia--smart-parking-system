<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parklopedia - Dashboard</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideInUp 0.5s ease-out;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
        }
        .user-info {
            display: flex;
            align-items: center;
        }
        .user-name {
            margin-right: 15px;
        }
        .logout-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .logout-btn:hover {
            background-color: #c0392b;
            transform: scale(1.05);
        }
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            animation: fadeIn 0.8s ease-out;
        }
        .welcome-banner {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        .welcome-banner::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50%;
        }
        
        .welcome-text h1 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 32px;
            font-weight: 600;
        }
        
        .welcome-text p {
            margin-top: 0;
            opacity: 0.9;
            font-size: 16px;
            max-width: 600px;
        }
        
        .book-now-btn {
            background-color: white;
            color: #3498db;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .book-now-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            animation: slideInUp 0.6s ease-out 0.2s backwards;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: scaleIn 0.5s ease-out backwards;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .stat-card:nth-child(1) { animation-delay: 0.3s; }
        .stat-card:nth-child(2) { animation-delay: 0.4s; }
        .stat-card:nth-child(3) { animation-delay: 0.5s; }
        .stat-card:nth-child(4) { animation-delay: 0.6s; }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            animation: float 3s ease-in-out infinite;
        }
        
        .stat-info {
            flex: 1;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            margin: 0;
        }
        
        .stat-label {
            font-size: 14px;
            color: #7f8c8d;
            margin: 0;
        }
        
        .notifications-section {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .notification-item {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s;
        }
        
        .notification-item:last-child {
            border-bottom: none;
        }
        
        .notification-item:hover {
            background-color: #f8f9fa;
        }
        
        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 18px;
        }
        
        .notification-content {
            flex: 1;
        }
        
        .notification-title {
            font-weight: bold;
            color: #2c3e50;
            margin: 0 0 5px 0;
        }
        
        .notification-message {
            color: #555;
            margin: 0;
            font-size: 14px;
        }
        
        .notification-time {
            color: #7f8c8d;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .unread {
            background-color: #e3f2fd;
        }
        
        @media (max-width: 768px) {
            .welcome-banner {
                flex-direction: column;
                text-align: center;
                padding: 30px 20px;
            }
            
            .welcome-text {
                margin-bottom: 20px;
            }
            
            .book-now-btn {
                width: 100%;
                text-align: center;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .dashboard-card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            padding: 25px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .card-icon {
            width: 50px;
            height: 50px;
            background-color: #f0f7ff;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            color: #3498db;
            font-size: 24px;
        }
        .card-title {
            font-size: 20px;
            color: #2c3e50;
            margin: 0;
        }
        .card-content {
            color: #555;
        }
        .card-footer {
            margin-top: 20px;
            text-align: right;
        }
        .card-link {
            color: #3498db;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
        }
        .card-link:hover {
            text-decoration: underline;
        }
        .card-link i {
            margin-left: 5px;
        }
        .recent-bookings {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            padding: 25px;
            margin-bottom: 30px;
        }
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .section-title {
            font-size: 20px;
            color: #2c3e50;
            margin: 0;
        }
        .view-all {
            color: #3498db;
            text-decoration: none;
        }
        .view-all:hover {
            text-decoration: underline;
        }
        .booking-list {
            border-collapse: collapse;
            width: 100%;
        }
        .booking-list th {
            text-align: left;
            padding: 12px 15px;
            background-color: #f9f9f9;
            color: #2c3e50;
            font-weight: bold;
            border-bottom: 1px solid #eee;
        }
        .booking-list td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            color: #555;
        }
        .booking-list tr:last-child td {
            border-bottom: none;
        }
        .booking-list tr:hover td {
            background-color: #f5f9fc;
        }
        .status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        .status-confirmed {
            background-color: #e1f5fe;
            color: #0288d1;
        }
        .status-completed {
            background-color: #e8f5e9;
            color: #388e3c;
        }
        .status-cancelled {
            background-color: #ffebee;
            color: #d32f2f;
        }
        .no-bookings {
            text-align: center;
            padding: 30px 0;
            color: #777;
        }
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        .action-card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            padding: 20px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            text-decoration: none;
        }
        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .action-icon {
            width: 40px;
            height: 40px;
            background-color: #f0f7ff;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            color: #3498db;
            font-size: 20px;
        }
        .action-text {
            color: #2c3e50;
            font-weight: bold;
        }
        .fastag-balance {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .fastag-balance.low {
            color: #e74c3c;
        }
        
        .fastag-balance i {
            font-size: 12px;
        }
        
        .quick-recharge-btn {
            background-color: #2ecc71;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            margin-top: 5px;
            transition: background-color 0.3s;
        }
        
        .quick-recharge-btn:hover {
            background-color: #27ae60;
        }
        
        .action-card.fastag-card {
            position: relative;
            overflow: hidden;
        }
        
        .action-card.fastag-card::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 0 50px 50px 0;
            border-color: transparent #f0f7ff transparent transparent;
            transition: all 0.3s ease;
        }
        
        .action-card.fastag-card:hover::after {
            border-color: transparent #3498db transparent transparent;
        }
        .vehicles-list {
            max-height: 200px;
            overflow-y: auto;
            margin: 10px 0;
        }
        .vehicle-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s;
        }
        .vehicle-item:hover {
            background-color: #f5f5f5;
        }
        .vehicle-icon {
            font-size: 20px;
            margin-right: 10px;
        }
        .vehicle-info {
            flex: 1;
        }
        .vehicle-name {
            font-weight: bold;
            color: #2c3e50;
        }
        .vehicle-details {
            font-size: 12px;
            color: #7f8c8d;
        }
        .vehicle-status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 10px;
        }
        .status-active {
            background-color: #2ecc71;
            color: white;
        }
        .add-vehicle-link {
            display: inline-block;
            color: #3498db;
            text-decoration: none;
            margin-top: 10px;
        }
        .add-vehicle-link:hover {
            text-decoration: underline;
        }
        .loyalty-info {
            text-align: center;
        }
        
        .loyalty-tier {
            margin-bottom: 20px;
        }
        
        .tier-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ffd700, #ffa500);
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        .tier-progress {
            margin-top: 10px;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffa500);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .tier-points {
            font-size: 12px;
            color: #7f8c8d;
        }
        
        .loyalty-points {
            margin-bottom: 20px;
        }
        
        .points-value {
            font-size: 36px;
            font-weight: bold;
            color: #c2185b;
        }
        
        .points-label {
            font-size: 16px;
            color: #7f8c8d;
            margin-left: 5px;
        }
        
        .loyalty-benefits {
            text-align: left;
            margin-top: 20px;
        }
        
        .loyalty-benefits h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .loyalty-benefits ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .loyalty-benefits li {
            margin-bottom: 8px;
            color: #555;
            display: flex;
            align-items: center;
        }
        
        .loyalty-benefits i {
            color: #2ecc71;
            margin-right: 8px;
        }
        
        .next-tier-benefits {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .next-tier-benefits h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .next-tier-benefits i {
            color: #95a5a6;
        }
        
        .points-history {
            margin-top: 20px;
        }
        
        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .history-date {
            color: #7f8c8d;
            font-size: 12px;
        }
        
        .history-points {
            color: #2ecc71;
            font-weight: bold;
        }
        
        .history-details {
            flex: 1;
            margin-left: 15px;
        }
        
        .history-action {
            font-weight: bold;
            color: #2c3e50;
        }

        /* Add these new animation styles */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.95);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }

        /* Apply animations to existing elements */
        .container {
            animation: fadeIn 0.8s ease-out;
        }

        .stats-container {
            animation: slideInUp 0.6s ease-out 0.2s backwards;
        }

        .stat-card {
            animation: scaleIn 0.5s ease-out backwards;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .stat-icon {
            animation: float 3s ease-in-out infinite;
        }

        .booking-card {
            animation: slideInUp 0.5s ease-out backwards;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .booking-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .action-btn {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .action-btn:active {
            transform: translateY(0);
        }

        .toast {
            animation: slideInUp 0.3s ease-out;
        }

        .loading-overlay {
            animation: fadeIn 0.3s ease-out;
        }

        .spinner {
            animation: spin 1s linear infinite, pulse 2s ease-in-out infinite;
        }

        /* Add smooth transitions for all interactive elements */
        .action-btn, .booking-card, .stat-card, .header, .container {
            transition: all 0.3s ease;
        }

        /* Add hover effects to buttons */
        .action-btn:hover {
            background: linear-gradient(135deg, #2980b9, #3498db);
        }

        .action-btn:active {
            transform: scale(0.98);
        }

        /* Add subtle animation to the welcome message */
        .welcome-message {
            animation: fadeIn 1s ease-out;
        }

        /* Add animation to the logout button */
        .logout-btn {
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background-color: #c0392b;
            transform: scale(1.05);
        }

        /* Add animation to the search box */
        .search-box {
            transition: all 0.3s ease;
        }

        .search-box:focus {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Add animation to the filter buttons */
        .filter-btn {
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .filter-btn.active {
            animation: pulse 1s ease-in-out;
        }

        /* Add animation to the booking status badges */
        .status-badge {
            transition: all 0.3s ease;
        }

        .status-badge:hover {
            transform: scale(1.1);
        }

        /* Add animation to the empty state message */
        .empty-state {
            animation: fadeIn 1s ease-out;
        }

        /* Add animation to the loading spinner */
        .loading-spinner {
            animation: fadeIn 0.3s ease-out;
        }

        /* Add animation to the error message */
        .error-message {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="header">
        <div class="logo">Parklopedia</div>
        <div class="user-info">
            <span class="user-name" id="userNameDisplay">Welcome, User</span>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </div>
    
    <div class="container">
        <div class="welcome-banner">
            <div class="welcome-text">
                <h1>Welcome to Parklopedia</h1>
                <p>Find and book parking spots with ease. No more circling around for parking!</p>
            </div>
            <a href="parking-locations.html" class="book-now-btn">Book Parking Now</a>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-car"></i>
                <div class="stat-info">
                    <h3>Registered Vehicles</h3>
                    <p id="vehicleCount">0</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-calendar-check"></i>
                <div class="stat-info">
                    <h3>Active Bookings</h3>
                    <p id="activeBookings">0</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-history"></i>
                <div class="stat-info">
                    <h3>Total Bookings</h3>
                    <p id="totalBookings">0</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-star"></i>
                <div class="stat-info">
                    <h3>Loyalty Points</h3>
                    <p id="loyaltyPoints">0</p>
                </div>
            </div>
        </div>
        
        <div class="notifications-section">
            <div class="section-header">
                <h3 class="section-title">Notifications</h3>
                <a href="#" class="view-all">View All</a>
            </div>
            
            <div id="notificationsList">
                <div class="notification-item unread">
                    <div class="notification-icon" style="background-color: #e3f2fd; color: #1976d2;">
                        <i class="fas fa-bell"></i>
                    </div>
                    <div class="notification-content">
                        <h4 class="notification-title">Welcome to Parklopedia!</h4>
                        <p class="notification-message">Get started by adding your vehicles and making your first booking.</p>
                        <p class="notification-time">Just now</p>
                    </div>
                </div>
                
                <div class="notification-item">
                    <div class="notification-icon" style="background-color: #e8f5e9; color: #388e3c;">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="notification-content">
                        <h4 class="notification-title">FASTag Recharge Successful</h4>
                        <p class="notification-message">Your FASTag has been recharged with ₹500.00</p>
                        <p class="notification-time">2 hours ago</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-car"></i>
                    </div>
                    <h3 class="card-title">My Vehicles</h3>
                </div>
                <div class="card-content">
                    <div id="vehiclesList" class="vehicles-list">
                        <!-- Vehicles will be loaded here -->
                    </div>
                    <div id="noVehicles" class="no-vehicles" style="display: none;">
                        <p>You haven't added any vehicles yet.</p>
                        <a href="register-vehicle.html" class="add-vehicle-link">Add Your First Vehicle</a>
                    </div>
                </div>
                <div class="card-footer">
                    <a href="register-vehicle.html" class="card-link">Manage Vehicles <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
            
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <h3 class="card-title">Parking Locations</h3>
                </div>
                <div class="card-content">
                    <p>Explore parking locations near you. View availability, rates and book your spot in advance.</p>
                </div>
                <div class="card-footer">
                    <a href="parking-locations.html" class="card-link">Find Parking <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
            
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <h3 class="card-title">Booking History</h3>
                </div>
                <div class="card-content">
                    <p>View your past and upcoming bookings. Check details, download receipts or cancel bookings.</p>
                </div>
                <div class="card-footer">
                    <a href="my-bookings.html" class="card-link">View Bookings <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        </div>
        
        <div class="recent-bookings">
            <div class="section-header">
                <h3 class="section-title">Recent Bookings</h3>
                <a href="my-bookings.html" class="view-all">View All</a>
            </div>
            
            <div id="bookingsTableContainer">
                <table class="booking-list" id="bookingsTable" style="display: none;">
                    <thead>
                        <tr>
                            <th>Booking ID</th>
                            <th>Location</th>
                            <th>Date & Time</th>
                            <th>Vehicle</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="bookingsTableBody">
                        <!-- Bookings will be loaded here -->
                    </tbody>
                </table>
                
                <div id="noBookings" class="no-bookings">
                    <p>You haven't made any bookings yet.</p>
                    <a href="parking-locations.html" class="book-now-btn">Book Your First Parking</a>
                </div>
            </div>
        </div>
        
        <h3 class="section-title">Quick Actions</h3>
        <div class="quick-actions">
            <a href="parking-locations.html" class="action-card">
                <div class="action-icon">
                    <i class="fas fa-plus"></i>
                </div>
                <div class="action-text">New Booking</div>
            </a>
            
            <a href="my-bookings.html" class="action-card">
                <div class="action-icon">
                    <i class="fas fa-ticket-alt"></i>
                </div>
                <div class="action-text">My Bookings</div>
            </a>
            
            <a href="fastag-recharge.html" class="action-card fastag-card">
                <div class="action-icon">
                    <i class="fas fa-tag"></i>
                </div>
                <div>
                    <div class="action-text">FASTag Recharge</div>
                    <div class="fastag-balance" id="fastagBalance">
                        <i class="fas fa-wallet"></i>
                        Balance: ₹500.00
                    </div>
                    <button class="quick-recharge-btn" onclick="quickRecharge()">
                        <i class="fas fa-bolt"></i> Quick Recharge
                    </button>
                </div>
            </a>
            
            <a href="#" class="action-card">
                <div class="action-icon">
                    <i class="fas fa-headset"></i>
                </div>
                <div class="action-text">Support</div>
            </a>
        </div>
    </div>

    <script>
    // Check if user is logged in
    document.addEventListener("DOMContentLoaded", function() {
        const isLoggedIn = sessionStorage.getItem("isLoggedIn");
        if (!isLoggedIn || isLoggedIn !== "true") {
            window.location.href = "login.html";
            return;
        }
        
        // Display user name
        const username = sessionStorage.getItem("username");
        if (username) {
            document.getElementById("userNameDisplay").textContent = "Welcome, " + username;
        }
        
        // Load recent bookings
        loadRecentBookings();
        loadDashboardVehicles();
        loadFASTagBalance();
        loadDashboardStats();
        updateLoyaltyTier();
    });
    
    function logout() {
        sessionStorage.removeItem("isLoggedIn");
        sessionStorage.removeItem("username");
        window.location.href = "login.html";
    }
    
    function loadRecentBookings() {
        const bookingsTable = document.getElementById("bookingsTable");
        const bookingsTableBody = document.getElementById("bookingsTableBody");
        const noBookings = document.getElementById("noBookings");
        
        // Get bookings from storage
        let bookings = [];
        const storedBookings = sessionStorage.getItem("bookings");
        if (storedBookings) {
            bookings = JSON.parse(storedBookings);
        }
        
        // Check if there are any bookings
        if (bookings.length === 0) {
            bookingsTable.style.display = "none";
            noBookings.style.display = "block";
            return;
        }
        
        // Display bookings
        bookingsTable.style.display = "table";
        noBookings.style.display = "none";
        
        // Sort bookings by date (newest first)
        bookings.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        
        // Display only the 5 most recent bookings
        const recentBookings = bookings.slice(0, 5);
        
        // Clear existing rows
        bookingsTableBody.innerHTML = "";
        
        // Add booking rows
        const today = new Date().toISOString().split('T')[0];
        
        recentBookings.forEach(booking => {
            // Determine booking status
            let statusClass = "status-confirmed";
            let statusText = "Confirmed";
            
            if (booking.status === 'Cancelled') {
                statusClass = "status-cancelled";
                statusText = "Cancelled";
            } else if (booking.date < today) {
                statusClass = "status-completed";
                statusText = "Completed";
            }
            
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${booking.bookingId}</td>
                <td>${booking.location}</td>
                <td>${booking.date}, ${booking.startTime} - ${booking.endTime}</td>
                <td>${booking.vehicle.name} (${booking.vehicle.numberPlate})</td>
                <td><span class="status ${statusClass}">${statusText}</span></td>
            `;
            
            bookingsTableBody.appendChild(row);
        });
    }

    function loadDashboardVehicles() {
        const vehiclesList = document.getElementById("vehiclesList");
        const noVehicles = document.getElementById("noVehicles");
        
        // Get vehicles from storage
        let vehicles = [];
        const storedVehicles = sessionStorage.getItem("vehicles");
        if (storedVehicles) {
            vehicles = JSON.parse(storedVehicles);
        }
        
        // Display vehicles or no vehicles message
        if (vehicles.length === 0) {
            vehiclesList.innerHTML = "";
            noVehicles.style.display = "block";
        } else {
            vehiclesList.innerHTML = "";
            noVehicles.style.display = "none";
            
            // Show only the first 3 vehicles
            vehicles.slice(0, 3).forEach(vehicle => {
                const item = document.createElement("div");
                item.className = "vehicle-item";
                item.innerHTML = `
                    <span class="vehicle-icon">${vehicle.icon}</span>
                    <div class="vehicle-info">
                        <div class="vehicle-name">${vehicle.name}</div>
                        <div class="vehicle-details">
                            ${vehicle.type} • ${vehicle.numberPlate}
                            <span class="vehicle-status ${vehicle.status || 'status-active'}">${vehicle.status || 'Active'}</span>
                        </div>
                    </div>
                `;
                vehiclesList.appendChild(item);
            });
            
            // Show "View All" link if there are more vehicles
            if (vehicles.length > 3) {
                const viewAll = document.createElement("div");
                viewAll.style.textAlign = "center";
                viewAll.style.marginTop = "10px";
                viewAll.innerHTML = `<a href="register-vehicle.html" class="add-vehicle-link">View All ${vehicles.length} Vehicles</a>`;
                vehiclesList.appendChild(viewAll);
            }
        }
    }

    function loadFASTagBalance() {
        const fastagBalance = sessionStorage.getItem('fastagBalance') || '500.00';
        const balanceElement = document.getElementById('fastagBalance');
        const balance = parseFloat(fastagBalance);
        
        balanceElement.innerHTML = `
            <i class="fas fa-wallet"></i>
            Balance: ₹${balance.toFixed(2)}
        `;
        
        // Add low balance warning if balance is less than ₹200
        if (balance < 200) {
            balanceElement.classList.add('low');
            balanceElement.innerHTML += '<i class="fas fa-exclamation-circle"></i>';
        } else {
            balanceElement.classList.remove('low');
        }
    }
    
    function quickRecharge() {
        const currentBalance = parseFloat(sessionStorage.getItem('fastagBalance') || '500.00');
        const rechargeAmount = 500; // Default recharge amount
        
        // Show loading state
        const rechargeBtn = document.querySelector('.quick-recharge-btn');
        const originalText = rechargeBtn.innerHTML;
        rechargeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
        rechargeBtn.disabled = true;
        
        // Simulate recharge process
        setTimeout(() => {
            const newBalance = currentBalance + rechargeAmount;
            sessionStorage.setItem('fastagBalance', newBalance.toString());
            loadFASTagBalance();
            
            // Reset button state
            rechargeBtn.innerHTML = originalText;
            rechargeBtn.disabled = false;
            
            // Show success message
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `
                <i class="fas fa-check-circle"></i>
                Recharge successful! New balance: ₹${newBalance.toFixed(2)}
            `;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }, 1500);
    }

    function loadDashboardStats() {
        // Load vehicles count
        const vehicles = JSON.parse(sessionStorage.getItem("vehicles") || "[]");
        document.getElementById("vehicleCount").textContent = vehicles.length;
        
        // Load bookings count
        const bookings = JSON.parse(sessionStorage.getItem("bookings") || "[]");
        const activeBookings = bookings.filter(booking => {
            if (booking.status === "Cancelled") return false;
            const bookingDate = new Date(booking.date);
            const bookingEndTime = new Date(booking.date + " " + booking.endTime);
            const now = new Date();
            return bookingDate <= now && bookingEndTime >= now;
        });
        
        document.getElementById("activeBookings").textContent = activeBookings.length;
        document.getElementById("totalBookings").textContent = bookings.length;
        
        // Load loyalty points
        const loyaltyPoints = parseInt(sessionStorage.getItem("loyaltyPoints") || "0");
        document.getElementById("loyaltyPoints").textContent = loyaltyPoints;
    }

    function updateLoyaltyTier() {
        const points = parseInt(sessionStorage.getItem("loyaltyPoints") || "0");
        const tierElement = document.getElementById("loyaltyTier");
        const progressElement = document.getElementById("tierProgress");
        const currentPointsElement = document.getElementById("currentPoints");
        const nextTierPointsElement = document.getElementById("nextTierPoints");
        const currentBenefitsElement = document.getElementById("currentBenefits");
        const nextTierBenefitsElement = document.getElementById("nextTierBenefits");
        
        let tier = "Bronze";
        let nextTierPoints = 1000;
        let progress = (points / nextTierPoints) * 100;
        
        if (points >= 1000) {
            tier = "Silver";
            nextTierPoints = 2500;
            progress = ((points - 1000) / (nextTierPoints - 1000)) * 100;
        }
        if (points >= 2500) {
            tier = "Gold";
            nextTierPoints = 5000;
            progress = ((points - 2500) / (nextTierPoints - 2500)) * 100;
        }
        if (points >= 5000) {
            tier = "Platinum";
            nextTierPoints = 10000;
            progress = ((points - 5000) / (nextTierPoints - 5000)) * 100;
        }
        if (points >= 10000) {
            tier = "Diamond";
            progress = 100;
        }
        
        tierElement.textContent = tier;
        tierElement.className = "tier-badge " + tier.toLowerCase();
        progressElement.style.width = progress + "%";
        currentPointsElement.textContent = points;
        nextTierPointsElement.textContent = nextTierPoints;
        
        // Update benefits based on tier
        updateBenefits(tier, currentBenefitsElement, nextTierBenefitsElement);
    }

    function updateBenefits(tier, currentBenefitsElement, nextTierBenefitsElement) {
        const benefits = {
            Bronze: [
                "100 points = ₹10 discount",
                "Priority booking access",
                "Exclusive parking spots"
            ],
            Silver: [
                "100 points = ₹12 discount",
                "Priority booking access",
                "Exclusive parking spots",
                "20% more points on bookings"
            ],
            Gold: [
                "100 points = ₹15 discount",
                "Priority booking access",
                "Exclusive parking spots",
                "20% more points on bookings",
                "Free cancellation up to 1 hour before"
            ],
            Platinum: [
                "100 points = ₹20 discount",
                "Priority booking access",
                "Exclusive parking spots",
                "20% more points on bookings",
                "Free cancellation up to 1 hour before",
                "Monthly free parking voucher"
            ],
            Diamond: [
                "100 points = ₹25 discount",
                "Priority booking access",
                "Exclusive parking spots",
                "20% more points on bookings",
                "Free cancellation up to 1 hour before",
                "Monthly free parking voucher",
                "Personal parking concierge"
            ]
        };
        
        const nextTierBenefits = {
            Bronze: [
                "20% more points on bookings",
                "Free cancellation up to 1 hour before",
                "Monthly free parking voucher"
            ],
            Silver: [
                "Free cancellation up to 1 hour before",
                "Monthly free parking voucher",
                "Personal parking concierge"
            ],
            Gold: [
                "Monthly free parking voucher",
                "Personal parking concierge",
                "VIP parking access"
            ],
            Platinum: [
                "Personal parking concierge",
                "VIP parking access",
                "Annual free parking pass"
            ],
            Diamond: [
                "All benefits unlocked!",
                "Stay tuned for exclusive offers",
                "Thank you for your loyalty!"
            ]
        };
        
        currentBenefitsElement.innerHTML = benefits[tier].map(benefit => 
            `<li><i class="fas fa-check"></i> ${benefit}</li>`
        ).join('');
        
        if (tier !== "Diamond") {
            nextTierBenefitsElement.style.display = "block";
            nextTierBenefitsElement.innerHTML = `
                <h4>Next Tier Benefits</h4>
                <ul>
                    ${nextTierBenefits[tier].map(benefit => 
                        `<li><i class="fas fa-lock"></i> ${benefit}</li>`
                    ).join('')}
                </ul>
            `;
        } else {
            nextTierBenefitsElement.style.display = "none";
        }
    }
    </script>
</body>
</html>